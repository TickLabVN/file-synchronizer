appId: com.electron.app
productName: file-synchronizer
directories:
    buildResources: build
files:
    - "!**/.vscode/*"
    - "!src/*"
    - "!electron.vite.config.{js,ts,mjs,cjs}"
    - "!{.eslintcache,eslint.config.mjs,.prettierignore,.prettierrc.yaml,dev-app-update.yml,CHANGELOG.md,README.md}"
    - "!{.env,.env.*,.npmrc,pnpm-lock.yaml}"
asarUnpack:
    - resources/**
win:
    executableName: file-synchronizer
    target:
        - nsis
        - zip
        - msi
nsis:
    artifactName: ${name}-${version}-setup.${ext}
    shortcutName: ${productName}
    uninstallDisplayName: ${productName}
    createDesktopShortcut: always
mac:
    entitlementsInherit: build/entitlements.mac.plist
    extendInfo:
        - NSCameraUsageDescription: Application requests access to the device's camera.
        - NSMicrophoneUsageDescription: Application requests access to the device's microphone.
        - NSDocumentsFolderUsageDescription: Application requests access to the user's Documents folder.
        - NSDownloadsFolderUsageDescription: Application requests access to the user's Downloads folder.
    notarize: false
dmg:
    artifactName: ${name}-${version}.${ext}
linux:
    target:
        - AppImage
        - deb
        - tar.gz
    maintainer: electronjs.org
    category: Utility
afterPack: |
  const fs = require('fs');
  const path = require('path');
  const sandbox = path.join(context.appOutDir, 'chrome-sandbox');
  try {
    fs.chownSync(sandbox, 0, 0);
    fs.chmodSync(sandbox, 0o4755);
    console.log('chrome-sandbox permissions fixed');
  } catch (e) {
    console.warn('Failed to fix chrome-sandbox permissions:', e);
  }
appImage:
    artifactName: ${name}-${version}.${ext}
npmRebuild: false
publish:
    provider: github
electronDownload:
    mirror: https://npmmirror.com/mirrors/electron/
